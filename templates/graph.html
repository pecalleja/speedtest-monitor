<!DOCTYPE html>
<html lang="en">
<head>
    <script src="/static/Chart.min.js"></script>
    <script src="/static/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/Chart.min.css">
    <meta charset="UTF-8">
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
    <title>Internet speed monitor</title>
</head>
<body>
<div style="width:75%;">
    <canvas id="canvas"></canvas>
</div>
<script>
    $.ajax({
        url: '/measurement',
        dataType: 'json',
    }).done(function (json_data) {
        var labels = json_data.result.map(function (e) {
            return e.created_at;
        });
        var upload_values = json_data.result.map(function (e) {
            return e.upload;
        });
        var download_values = json_data.result.map(function (e) {
            return e.download
        })
        console.log(labels)
        console.log(download_values)
        console.log(upload_values)
        var lineChartData = {
            labels: labels,
            datasets: [{
                label: 'Download Kbps',
                borderColor: 'red',
                backgroundColor: 'red',
                fill: false,
                data: download_values
                ,
                yAxisID: 'y-axis-1',
            }, {
                label: 'Upload Kbps',
                borderColor: 'blue',
                backgroundColor: 'blue',
                fill: false,
                data: upload_values,
                yAxisID: 'y-axis-2'
            }]
        };
        var ctx = document.getElementById('canvas').getContext('2d');
        window.myLine = new Chart(ctx, {
            type: 'line',
            data: lineChartData,
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: 'Internet Speed Monitor'
                },
                scales: {
                    yAxes: [{
                        type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                        display: true,
                        position: 'left',
                        id: 'y-axis-1',
                    }, {
                        type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                        display: true,
                        position: 'right',
                        id: 'y-axis-2',

                        // grid line settings
                        gridLines: {
                            drawOnChartArea: false, // only want the grid lines for one axis to show up
                        },
                    }],
                }
            }
        });
    });
</script>
</body>
</html>
